---
page_title: "github_organization_ruleset Resource - terraform-provider-github"
description: |-
  Creates a GitHub organization ruleset.
  This resource allows you to create and manage rulesets on the organization level. When applied, a new ruleset will be created. When destroyed, that ruleset will be removed.
---

# github_organization_ruleset (Resource)

Creates a GitHub organization ruleset.

This resource allows you to create and manage rulesets on the organization level. When applied, a new ruleset will be created. When destroyed, that ruleset will be removed.

## Example Usage

```terraform
resource "github_organization_ruleset" "example" {
  name        = "example"
  target      = "branch"
  enforcement = "active"

  conditions {
    ref_name {
      include = ["~ALL"]
      exclude = []
    }
  }

  bypass_actors {
    actor_id    = 13473
    actor_type  = "Integration"
    bypass_mode = "always"
  }

  rules {
    creation                = true
    update                  = true
    deletion                = true
    required_linear_history = true
    required_signatures     = true

    branch_name_pattern {
      name     = "example"
      negate   = false
      operator = "starts_with"
      pattern  = "ex"
    }

    required_workflows {
      do_not_enforce_on_create = true
      required_workflow {
        repository_id = 1234
        path          = ".github/workflows/ci.yml"
        ref           = "main"
      }
    }

    required_code_scanning {
      required_code_scanning_tool {
        alerts_threshold          = "errors"
        security_alerts_threshold = "high_or_higher"
        tool                      = "CodeQL"
      }
    }
  }
}

# Example with push ruleset  
resource "github_organization_ruleset" "example_push" {
  name        = "example_push"
  target      = "push"
  enforcement = "active"

  conditions {
    ref_name {
      include = ["~ALL"]
      exclude = []
    }
    repository_name {
      include = ["~ALL"] 
      exclude = []
    }
  }

  rules {
    file_path_restriction {
      restricted_file_paths = [".github/workflows/*", "*.env"]
    }
    
    max_file_size {
      max_file_size = 100  # 100 MB
    }
    
    max_file_path_length {
      max_file_path_length = 255
    }
    
    file_extension_restriction {
      restricted_file_extensions = ["*.exe", "*.dll", "*.so"]
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `enforcement` (String) Possible values for Enforcement are `disabled`, `active`, `evaluate`. Note: `evaluate` is currently only supported for owners of type `organization`.
- `name` (String) The name of the ruleset.
- `rules` (Block List, Min: 1, Max: 1) Rules within the ruleset. (see [below for nested schema](#nestedblock--rules))
- `target` (String) Possible values are `branch`, `tag` and `push`. Note: The `push` target is in beta and is subject to change.

### Optional

- `bypass_actors` (Block List) The actors that can bypass the rules in this ruleset. (see [below for nested schema](#nestedblock--bypass_actors))
- `conditions` (Block List, Max: 1) Parameters for an organization ruleset condition. `ref_name` is required alongside one of `repository_name` or `repository_id`. (see [below for nested schema](#nestedblock--conditions))

### Read-Only

- `etag` (String) The ETag of the ruleset.
- `id` (String) The ID of this resource.
- `node_id` (String) GraphQL global node id for use with v4 API.
- `ruleset_id` (Number) GitHub ID for the ruleset.

<a id="nestedblock--rules"></a>
### Nested Schema for `rules`

Optional:

- `branch_name_pattern` (Block List, Max: 1) Parameters to be used for the branch_name_pattern rule. This rule only applies to repositories within an enterprise, it cannot be applied to repositories owned by individuals or regular organizations. Conflicts with `tag_name_pattern` as it only applies to rulesets with target `branch`. (see [below for nested schema](#nestedblock--rules--branch_name_pattern))
- `commit_author_email_pattern` (Block List, Max: 1) Parameters to be used for the commit_author_email_pattern rule. (see [below for nested schema](#nestedblock--rules--commit_author_email_pattern))
- `commit_message_pattern` (Block List, Max: 1) Parameters to be used for the commit_message_pattern rule. (see [below for nested schema](#nestedblock--rules--commit_message_pattern))
- `committer_email_pattern` (Block List, Max: 1) Parameters to be used for the committer_email_pattern rule. (see [below for nested schema](#nestedblock--rules--committer_email_pattern))
- `creation` (Boolean) Only allow users with bypass permission to create matching refs.
- `deletion` (Boolean) Only allow users with bypass permissions to delete matching refs.
- `file_extension_restriction` (Block List, Max: 1) Prevent pushes based on file extensions. (see [below for nested schema](#nestedblock--rules--file_extension_restriction))
- `file_path_restriction` (Block List, Max: 1) Prevent commits that include changes in specified file paths from being pushed to the commit graph. (see [below for nested schema](#nestedblock--rules--file_path_restriction))
- `max_file_path_length` (Block List, Max: 1) Prevent pushes based on file path length. (see [below for nested schema](#nestedblock--rules--max_file_path_length))
- `max_file_size` (Block List, Max: 1) Prevent pushes based on file size. (see [below for nested schema](#nestedblock--rules--max_file_size))
- `non_fast_forward` (Boolean) Prevent users with push access from force pushing to branches.
- `pull_request` (Block List, Max: 1) Require all commits be made to a non-target branch and submitted via a pull request before they can be merged. (see [below for nested schema](#nestedblock--rules--pull_request))
- `required_code_scanning` (Block List, Max: 1) Choose which tools must provide code scanning results before the reference is updated. When configured, code scanning must be enabled and have results for both the commit and the reference being updated. (see [below for nested schema](#nestedblock--rules--required_code_scanning))
- `required_linear_history` (Boolean) Prevent merge commits from being pushed to matching branches.
- `required_signatures` (Boolean) Commits pushed to matching branches must have verified signatures.
- `required_status_checks` (Block List, Max: 1) Choose which status checks must pass before branches can be merged into a branch that matches this rule. When enabled, commits must first be pushed to another branch, then merged or pushed directly to a branch that matches this rule after status checks have passed. (see [below for nested schema](#nestedblock--rules--required_status_checks))
- `required_workflows` (Block List, Max: 1) Choose which Actions workflows must pass before branches can be merged into a branch that matches this rule. (see [below for nested schema](#nestedblock--rules--required_workflows))
- `tag_name_pattern` (Block List, Max: 1) Parameters to be used for the tag_name_pattern rule. This rule only applies to repositories within an enterprise, it cannot be applied to repositories owned by individuals or regular organizations. Conflicts with `branch_name_pattern` as it only applies to rulesets with target `tag`. (see [below for nested schema](#nestedblock--rules--tag_name_pattern))
- `update` (Boolean) Only allow users with bypass permission to update matching refs.

<a id="nestedblock--rules--branch_name_pattern"></a>
### Nested Schema for `rules.branch_name_pattern`

Required:

- `operator` (String) The operator to use for matching. Can be one of: `starts_with`, `ends_with`, `contains`, `regex`.
- `pattern` (String) The pattern to match with.

Optional:

- `name` (String) How this rule will appear to users.
- `negate` (Boolean) If true, the rule will fail if the pattern matches.


<a id="nestedblock--rules--commit_author_email_pattern"></a>
### Nested Schema for `rules.commit_author_email_pattern`

Required:

- `operator` (String) The operator to use for matching. Can be one of: `starts_with`, `ends_with`, `contains`, `regex`.
- `pattern` (String) The pattern to match with.

Optional:

- `name` (String) How this rule will appear to users.
- `negate` (Boolean) If true, the rule will fail if the pattern matches.


<a id="nestedblock--rules--commit_message_pattern"></a>
### Nested Schema for `rules.commit_message_pattern`

Required:

- `operator` (String) The operator to use for matching. Can be one of: `starts_with`, `ends_with`, `contains`, `regex`.
- `pattern` (String) The pattern to match with.

Optional:

- `name` (String) How this rule will appear to users.
- `negate` (Boolean) If true, the rule will fail if the pattern matches.


<a id="nestedblock--rules--committer_email_pattern"></a>
### Nested Schema for `rules.committer_email_pattern`

Required:

- `operator` (String) The operator to use for matching. Can be one of: `starts_with`, `ends_with`, `contains`, `regex`.
- `pattern` (String) The pattern to match with.

Optional:

- `name` (String) How this rule will appear to users.
- `negate` (Boolean) If true, the rule will fail if the pattern matches.


<a id="nestedblock--rules--file_extension_restriction"></a>
### Nested Schema for `rules.file_extension_restriction`

Required:

- `restricted_file_extensions` (Set of String) The file extensions that are restricted from being pushed to the commit graph.


<a id="nestedblock--rules--file_path_restriction"></a>
### Nested Schema for `rules.file_path_restriction`

Required:

- `restricted_file_paths` (List of String) The file paths that are restricted from being pushed to the commit graph.


<a id="nestedblock--rules--max_file_path_length"></a>
### Nested Schema for `rules.max_file_path_length`

Required:

- `max_file_path_length` (Number) The maximum allowed length of a file path.


<a id="nestedblock--rules--max_file_size"></a>
### Nested Schema for `rules.max_file_size`

Required:

- `max_file_size` (Number) The maximum allowed size of a file in megabytes (MB). Valid range is 1-100 MB.


<a id="nestedblock--rules--pull_request"></a>
### Nested Schema for `rules.pull_request`

Optional:

- `dismiss_stale_reviews_on_push` (Boolean) New, reviewable commits pushed will dismiss previous pull request review approvals. Defaults to `false`.
- `require_code_owner_review` (Boolean) Require an approving review in pull requests that modify files that have a designated code owner. Defaults to `false`.
- `require_last_push_approval` (Boolean) Whether the most recent reviewable push must be approved by someone other than the person who pushed it. Defaults to `false`.
- `required_approving_review_count` (Number) The number of approving reviews that are required before a pull request can be merged. Defaults to `0`.
- `required_review_thread_resolution` (Boolean) All conversations on code must be resolved before a pull request can be merged. Defaults to `false`.


<a id="nestedblock--rules--required_code_scanning"></a>
### Nested Schema for `rules.required_code_scanning`

Required:

- `required_code_scanning_tool` (Block Set, Min: 1) Tools that must provide code scanning results for this rule to pass. (see [below for nested schema](#nestedblock--rules--required_code_scanning--required_code_scanning_tool))

<a id="nestedblock--rules--required_code_scanning--required_code_scanning_tool"></a>
### Nested Schema for `rules.required_code_scanning.required_code_scanning_tool`

Required:

- `alerts_threshold` (String) The severity level at which code scanning results that raise alerts block a reference update. Can be one of: `none`, `errors`, `errors_and_warnings`, `all`.
- `security_alerts_threshold` (String) The severity level at which code scanning results that raise security alerts block a reference update. Can be one of: `none`, `critical`, `high_or_higher`, `medium_or_higher`, `all`.
- `tool` (String) The name of a code scanning tool.



<a id="nestedblock--rules--required_status_checks"></a>
### Nested Schema for `rules.required_status_checks`

Required:

- `required_check` (Block Set, Min: 1) Status checks that are required. Several can be defined. (see [below for nested schema](#nestedblock--rules--required_status_checks--required_check))

Optional:

- `do_not_enforce_on_create` (Boolean) Allow repositories and branches to be created if a check would otherwise prohibit it.
- `strict_required_status_checks_policy` (Boolean) Whether pull requests targeting a matching branch must be tested with the latest code. This setting will not take effect unless at least one status check is enabled. Defaults to `false`.

<a id="nestedblock--rules--required_status_checks--required_check"></a>
### Nested Schema for `rules.required_status_checks.required_check`

Required:

- `context` (String) The status check context name that must be present on the commit.

Optional:

- `integration_id` (Number) The optional integration ID that this status check must originate from.



<a id="nestedblock--rules--required_workflows"></a>
### Nested Schema for `rules.required_workflows`

Required:

- `required_workflow` (Block Set, Min: 1) Actions workflows that are required. Several can be defined. (see [below for nested schema](#nestedblock--rules--required_workflows--required_workflow))

Optional:

- `do_not_enforce_on_create` (Boolean) Allow repositories and branches to be created if a check would otherwise prohibit it.

<a id="nestedblock--rules--required_workflows--required_workflow"></a>
### Nested Schema for `rules.required_workflows.required_workflow`

Required:

- `path` (String) The path to the workflow YAML definition file.
- `repository_id` (Number) The repository in which the workflow is defined.

Optional:

- `ref` (String) The ref (branch or tag) of the workflow file to use.



<a id="nestedblock--rules--tag_name_pattern"></a>
### Nested Schema for `rules.tag_name_pattern`

Required:

- `operator` (String) The operator to use for matching. Can be one of: `starts_with`, `ends_with`, `contains`, `regex`.
- `pattern` (String) The pattern to match with.

Optional:

- `name` (String) How this rule will appear to users.
- `negate` (Boolean) If true, the rule will fail if the pattern matches.



<a id="nestedblock--bypass_actors"></a>
### Nested Schema for `bypass_actors`

Required:

- `actor_type` (String) The type of actor that can bypass a ruleset. See [GitHub Documentation](https://docs.github.com/en/rest/orgs/rules) for more information
- `bypass_mode` (String) When the specified actor can bypass the ruleset. pull_request means that an actor can only bypass rules on pull requests. Can be one of: `always`, `pull_request`, `exempt`.

Optional:

- `actor_id` (Number) The ID of the actor that can bypass a ruleset. When `actor_type` is `OrganizationAdmin`, this should be set to `1`. Some resources such as DeployKey do not have an ID and this should be omitted.


<a id="nestedblock--conditions"></a>
### Nested Schema for `conditions`

Required:

- `ref_name` (Block List, Min: 1, Max: 1) (see [below for nested schema](#nestedblock--conditions--ref_name))

Optional:

- `repository_id` (List of Number) The repository IDs that the ruleset applies to. One of these IDs must match for the condition to pass.
- `repository_name` (Block List, Max: 1) (see [below for nested schema](#nestedblock--conditions--repository_name))

<a id="nestedblock--conditions--ref_name"></a>
### Nested Schema for `conditions.ref_name`

Required:

- `exclude` (List of String) Array of ref names or patterns to exclude. The condition will not pass if any of these patterns match.
- `include` (List of String) Array of ref names or patterns to include. One of these patterns must match for the condition to pass. Also accepts `~DEFAULT_BRANCH` to include the default branch or `~ALL` to include all branches.


<a id="nestedblock--conditions--repository_name"></a>
### Nested Schema for `conditions.repository_name`

Required:

- `exclude` (List of String) Array of repository names or patterns to exclude. The condition will not pass if any of these patterns match.
- `include` (List of String) Array of repository names or patterns to include. One of these patterns must match for the condition to pass. Also accepts `~ALL` to include all repositories.

Optional:

- `protected` (Boolean) Whether renaming of target repositories is prevented.

## Import

GitHub Organization Rulesets can be imported using the GitHub ruleset ID e.g.

`$ terraform import github_organization_ruleset.example 12345`
